# .zshrc managed by chezmoi

# Path configuration
export PATH=$HOME/.local/bin:$PATH

# Homebrew Setup
if [ -d "/home/linuxbrew/.linuxbrew" ]; then
    eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
elif [ -d "$HOME/.linuxbrew" ]; then
    eval "$($HOME/.linuxbrew/bin/brew shellenv)"
elif [ -d "/opt/homebrew" ]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
elif [ -x "/usr/local/bin/brew" ]; then
    eval "$(/usr/local/bin/brew shellenv)"
fi

# Oh My Zsh Path
export ZSH="$HOME/.oh-my-zsh"

# Theme
ZSH_THEME="robbyrussell"

# Plugins
plugins=(git zsh-autosuggestions zsh-syntax-highlighting)

source $ZSH/oh-my-zsh.sh

# Modern CLI Replacements
if command -v bat >/dev/null 2>&1; then
  alias cat='bat'
fi

if command -v eza >/dev/null 2>&1; then
  alias ls='eza --icons'
  alias ll='eza -l --icons'
  alias la='eza -la --icons'
fi

if command -v rg >/dev/null 2>&1; then
  alias grep='rg'
fi

# Zoxide (cd replacement)
if command -v zoxide >/dev/null 2>&1; then
  eval "$(zoxide init zsh --cmd cd)"
fi

# FZF
if command -v fzf >/dev/null 2>&1; then
  [ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
  # If installed via brew, it might check specific paths
  if [ -f "$(brew --prefix)/opt/fzf/install" ]; then
    # Usually brew install fzf runs the install script or asks user to.
    # We can try sourcing the completion/key-bindings directly if they exist.
    source <(fzf --zsh) 2>/dev/null || true
  fi
fi

# Editor
export EDITOR='vim'
if command -v code >/dev/null 2>&1; then
  export EDITOR='code --wait'
fi
# Opencode check
if command -v opencode >/dev/null 2>&1; then
  export EDITOR='opencode'
fi

# User configuration
